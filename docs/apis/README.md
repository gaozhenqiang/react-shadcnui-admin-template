# è‚²å®‰æ•™è‚²ç®¡ç†å¹³å°åç«¯æœåŠ¡

[![NestJS](https://img.shields.io/badge/NestJS-11.x-red.svg)](https://nestjs.com/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.x-blue.svg)](https://www.typescriptlang.org/)
[![MongoDB](https://img.shields.io/badge/MongoDB-8.x-green.svg)](https://www.mongodb.com/)
[![Version](https://img.shields.io/badge/Version-v2.4.0-brightgreen.svg)](./CHANGELOG.md)
[![Build Status](https://img.shields.io/badge/Build-Passing-success.svg)]()
[![License](https://img.shields.io/badge/License-Private-red.svg)]()

è‚²å®‰æ•™è‚²ç®¡ç†å¹³å°çš„åç«¯æœåŠ¡ï¼ŒåŸºäº NestJS + MongoDB + TypeScript æ„å»ºï¼Œæä¾›**ç®¡ç†ç«¯**ã€**æ•™å¸ˆç«¯**ã€**å­¦ç”Ÿç«¯**çš„å®Œæ•´ä¸šåŠ¡åŠŸèƒ½ã€‚

---

## ğŸ‰ æœ€æ–°æ›´æ–° v2.4.0

**è€ƒè¯•ç®¡ç†å’Œè¯ä¹¦ç³»ç»Ÿé‡å¤§å‡çº§ï¼** æ–°å¢ä»¥ä¸‹æ ¸å¿ƒåŠŸèƒ½ï¼š

### âœ¨ ç¬¬1æ‰¹é«˜ä¼˜å…ˆçº§åŠŸèƒ½ï¼ˆå·²å®Œæˆï¼‰

#### 1. è€ƒè¯•ç±»å‹ç»„åˆè®¾ç½®
- âœ… æ”¯æŒ3ç§è€ƒè¯•ç±»å‹ï¼šåªæœ‰é€‰æ‹©é¢˜ã€é€‰æ‹©é¢˜+æŠ¥å‘Šã€è®ºæ–‡
- âœ… çµæ´»é…ç½®å„é¢˜å‹çš„æ•°é‡ã€å­—æ•°è¦æ±‚ã€åˆ†å€¼æ¯”ä¾‹
- âœ… è‡ªåŠ¨éªŒè¯åˆ†å€¼æ¯”ä¾‹æ€»å’Œ
- âœ… æ”¯æŒè‡ªå®šä¹‰è€ƒè¯•æµç¨‹

#### 2. é¢˜ç›®é€‰æ‹©å’Œåˆ†å€¼è®¡ç®—
- âœ… å®æ—¶è®¡ç®—å·²é€‰é¢˜ç›®æ€»åˆ†
- âœ… æ™ºèƒ½æç¤ºå‰©ä½™åˆ†å€¼
- âœ… è¾¾åˆ°ç›®æ ‡åˆ†å€¼åè‡ªåŠ¨ç¦ç”¨ç»§ç»­é€‰é¢˜
- âœ… æŒ‰é¢˜å‹ç»Ÿè®¡é¢˜åº“æ•°é‡
- âœ… æ™ºèƒ½æ¨èé¢˜ç›®åŠŸèƒ½

#### 3. çº¸è´¨è¯ä¹¦æ‰«æç‰ˆä¸Šä¼ 
- âœ… ç®¡ç†å‘˜å¯ä¸Šä¼ çº¸è´¨è¯ä¹¦æ‰«æç‰ˆ
- âœ… å­¦ç”Ÿå¯åœ¨çº¿æŸ¥çœ‹æ‰«æç‰ˆ
- âœ… è®°å½•ä¸Šä¼ äººå’Œä¸Šä¼ æ—¶é—´
- âœ… æ”¯æŒåˆ é™¤å’Œæ›´æ–°

**æ•´ä½“å®Œæˆåº¦**: ä» 77% æå‡è‡³ **91%** ğŸ¯

---

## ğŸ“– å®Œæ•´æ–‡æ¡£æ¸…å•

### æ ¸å¿ƒæ–‡æ¡£
- ğŸ“˜ **[README.md](./README.md)** - é¡¹ç›®è¯´æ˜ï¼ˆæœ¬æ–‡æ¡£ï¼‰
- ğŸ“— **[QUICKSTART.md](./QUICKSTART.md)** - å¿«é€Ÿå¼€å§‹æŒ‡å—
- ğŸ“™ **[DEPLOYMENT.md](./DEPLOYMENT.md)** - éƒ¨ç½²æŒ‡å—
- ğŸ“• **[CHANGELOG.md](./CHANGELOG.md)** - å®Œæ•´å˜æ›´æ—¥å¿—

### ä¸šåŠ¡é€»è¾‘æ–‡æ¡£
- ğŸ“„ **[BUSINESS_LOGIC.md](./BUSINESS_LOGIC.md)** - å®Œæ•´ä¸šåŠ¡é€»è¾‘è¯´æ˜
- ğŸ“„ **[FEATURES_OVERVIEW.md](./FEATURES_OVERVIEW.md)** - åŠŸèƒ½æ¦‚è§ˆ
- ğŸ“„ **[CERTIFICATE_SYSTEM_IMPLEMENTATION.md](./CERTIFICATE_SYSTEM_IMPLEMENTATION.md)** - è¯ä¹¦ç³»ç»Ÿå®æ–½æ–‡æ¡£
- ğŸ“„ **[EXAM_SYSTEM_UPGRADE.md](./EXAM_SYSTEM_UPGRADE.md)** - è€ƒè¯•ç³»ç»Ÿå‡çº§æ–‡æ¡£
- ğŸ“„ **[STUDENT_ENROLLMENT_ENHANCEMENT.md](./STUDENT_ENROLLMENT_ENHANCEMENT.md)** - å­¦å‘˜æŠ¥è€ƒæµç¨‹ä¼˜åŒ–

### æŠ€æœ¯æ–‡æ¡£
- ğŸ“„ **[API.md](./API.md)** - APIæ¥å£æ–‡æ¡£
- ğŸ“„ **[API_ENDPOINTS_COMPLETE.md](./API_ENDPOINTS_COMPLETE.md)** - APIæ¥å£æ¸…å•
- ğŸ“„ **[SWAGGER_GUIDE.md](./SWAGGER_GUIDE.md)** - Swaggeræ–‡æ¡£ç¼–å†™æŒ‡å—
- ğŸ“„ **[VALIDATION_ERROR_HANDLING.md](./VALIDATION_ERROR_HANDLING.md)** - å‚æ•°éªŒè¯é”™è¯¯å¤„ç†

### å®æ–½æ€»ç»“
- ğŸ“„ **[PRIORITY_FEATURES_IMPLEMENTATION.md](./PRIORITY_FEATURES_IMPLEMENTATION.md)** - ç¬¬1æ‰¹é«˜ä¼˜å…ˆçº§åŠŸèƒ½å®æ–½æŠ¥å‘Š
- ğŸ“„ **[EXAM_MANAGEMENT_ANALYSIS.md](./EXAM_MANAGEMENT_ANALYSIS.md)** - è€ƒè¯•ç®¡ç†åŠŸèƒ½åˆ†æ
- ğŸ“„ **[FINAL_IMPLEMENTATION_SUMMARY.md](./FINAL_IMPLEMENTATION_SUMMARY.md)** - æœ€ç»ˆå®æ–½æ€»ç»“
- ğŸ“„ **[TEACHER_CERTIFICATION_FEATURE.md](./TEACHER_CERTIFICATION_FEATURE.md)** - æ•™å¸ˆè®¤è¯åŠŸèƒ½æ–‡æ¡£

---

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®æ¦‚è¿°](#-é¡¹ç›®æ¦‚è¿°)
- [æ ¸å¿ƒç‰¹æ€§](#-æ ¸å¿ƒç‰¹æ€§)
- [æŠ€æœ¯æ ˆ](#ï¸-æŠ€æœ¯æ ˆ)
- [åŠŸèƒ½æ¨¡å—](#-åŠŸèƒ½æ¨¡å—)
- [API å“åº”æ ¼å¼](#-api-å“åº”æ ¼å¼)
- [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
- [é…ç½®è¯´æ˜](#ï¸-é…ç½®è¯´æ˜)
- [APIæ–‡æ¡£](#-apiæ–‡æ¡£)
- [æ•°æ®åº“è®¾è®¡](#ï¸-æ•°æ®åº“è®¾è®¡)
- [æ ¸å¿ƒä¸šåŠ¡æµç¨‹](#-æ ¸å¿ƒä¸šåŠ¡æµç¨‹)
- [æƒé™æ§åˆ¶](#-æƒé™æ§åˆ¶)
- [éƒ¨ç½²æŒ‡å—](#-éƒ¨ç½²æŒ‡å—)
- [å¼€å‘æŒ‡å—](#-å¼€å‘æŒ‡å—)
- [æ€§èƒ½ä¼˜åŒ–](#-æ€§èƒ½ä¼˜åŒ–)
- [å¸¸è§é—®é¢˜](#-å¸¸è§é—®é¢˜)
- [ç›‘æ§å’Œæ—¥å¿—](#-ç›‘æ§å’Œæ—¥å¿—)

---

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

è‚²å®‰æ•™è‚²ç®¡ç†å¹³å°æ˜¯ä¸€ä¸ª**åŠŸèƒ½å®Œæ•´**çš„åœ¨çº¿æ•™è‚²ç®¡ç†ç³»ç»Ÿï¼Œè¦†ç›–æ•™è‚²åŸ¹è®­å…¨ä¸šåŠ¡æµç¨‹ï¼š

### æ ¸å¿ƒåŠŸèƒ½
- ğŸ“š **è¯¾ç¨‹ç®¡ç†** - æ”¯æŒå…è´¹/æ”¶è´¹è¯¾ç¨‹ï¼Œç« èŠ‚è§†é¢‘/PDFå†…å®¹ï¼Œå­¦ä¹ è¿›åº¦è·Ÿè¸ª
- ğŸ“ **æŠ¥è€ƒç®¡ç†** - åœ¨çº¿æŠ¥åã€èµ„æ–™å®¡æ ¸ã€è¯ä¹¦å‘æ”¾ã€æœ‰æ•ˆæœŸç®¡ç†
- ğŸ“– **é¢˜åº“è€ƒè¯•** - 5ç§é¢˜å‹ã€æ™ºèƒ½ç»„å·ã€åœ¨çº¿è€ƒè¯•ã€è‡ªåŠ¨æ‰¹æ”¹ã€ä¸»è§‚é¢˜è¯„é˜…
- ğŸ‘¨â€ğŸ« **æ•™å¸ˆç®¡ç†** - æ•™å¸ˆè®¤è¯å®¡æ ¸ã€å¾®è¯¾å ‚å‘å¸ƒã€ä¸»è§‚é¢˜è¯„åˆ†ã€è®ºæ–‡è¯„å®¡
- ğŸ“ **è¯ä¹¦ç®¡ç†** - è¯ä¹¦ç”Ÿæˆã€å·¥æœ¬è´¹ç®¡ç†ã€ç‰©æµè¿½è¸ªã€æ‰«æç‰ˆä¸Šä¼ 
- ğŸ’° **è®¢å•æ”¯ä»˜** - æ”¯ä»˜å®/å¾®ä¿¡æ”¯ä»˜é›†æˆã€è®¢å•ç®¡ç†ã€é€€æ¬¾å¤„ç†
- ğŸ“¦ **ç‰©æµç®¡ç†** - è¯ä¹¦é‚®å¯„è¿½è¸ªã€ç‰©æµè½¨è¿¹è®°å½•
- ğŸ“° **å†…å®¹ç®¡ç†** - å…¬å‘Šã€è½®æ’­å›¾ã€è€ƒåŸ¹åŠ¨æ€ã€å¸¸è§é—®é¢˜

### ç³»ç»Ÿç‰¹ç‚¹
- âœ… **ä¸‰ç«¯åˆ†ç¦»** - ç®¡ç†ç«¯ã€æ•™å¸ˆç«¯ã€å­¦ç”Ÿç«¯ç‹¬ç«‹æ¨¡å—
- âœ… **æƒé™å®Œå–„** - åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRBACï¼‰
- âœ… **APIæ ‡å‡†** - ç»Ÿä¸€å“åº”æ ¼å¼ã€å®Œæ•´é”™è¯¯ç ä½“ç³»
- âœ… **æ–‡æ¡£é½å…¨** - Swagger APIæ–‡æ¡£ã€ä¸šåŠ¡é€»è¾‘æ–‡æ¡£
- âœ… **ç±»å‹å®‰å…¨** - TypeScriptå…¨æ ˆç±»å‹ä¿æŠ¤
- âœ… **ç”Ÿäº§å°±ç»ª** - å®Œå–„çš„å¼‚å¸¸å¤„ç†ã€æ—¥å¿—è®°å½•ã€ç›‘æ§å‘Šè­¦

---

## ğŸŒŸ æ ¸å¿ƒç‰¹æ€§

### 1. ç»Ÿä¸€å“åº”æ ¼å¼
æ‰€æœ‰ API è¿”å›ç»Ÿä¸€çš„ JSON æ ¼å¼ï¼š
```typescript
{
  code: number      // 0=æˆåŠŸï¼Œå…¶ä»–=é”™è¯¯ç 
  message: string   // æˆåŠŸ='success'ï¼Œå¤±è´¥=é”™è¯¯ä¿¡æ¯
  timestamp: string // ISOæ ¼å¼æ—¶é—´æˆ³
  data: object      // å“åº”æ•°æ®
}
```

### 2. å®Œæ•´çš„ä¸šåŠ¡æµç¨‹
- **æŠ¥è€ƒæµç¨‹**: æ³¨å†Œ â†’ æŠ¥å â†’ å®¡æ ¸ â†’ ä»˜è´¹ â†’ å­¦ä¹  â†’ è€ƒè¯• â†’ è¯ä¹¦
- **å­¦ä¹ æµç¨‹**: è´­ä¹° â†’ æƒé™å¼€é€š â†’ ç« èŠ‚å­¦ä¹  â†’ è¿›åº¦è¿½è¸ª â†’ å­¦ä¹ å®Œæˆ
- **è€ƒè¯•æµç¨‹**: å¼€å§‹ â†’ ç­”é¢˜ â†’ æäº¤ â†’ è‡ªåŠ¨æ‰¹æ”¹ â†’ ä¸»è§‚é¢˜è¯„åˆ† â†’ æˆç»©è®¡ç®—
- **é€€æ¬¾æµç¨‹**: ç”³è¯· â†’ å®¡æ ¸ â†’ åŸè·¯é€€å›

### 3. å¼ºå¤§çš„è€ƒè¯•ç³»ç»Ÿ
- **5ç§é¢˜å‹**: å•é€‰ã€å¤šé€‰ã€åˆ¤æ–­ã€è§£ç­”é¢˜ã€è®ºæ–‡
- **3ç§è€ƒè¯•ç±»å‹**: çº¯é€‰æ‹©é¢˜ã€é€‰æ‹©é¢˜+æŠ¥å‘Šã€è®ºæ–‡
- **æ™ºèƒ½ç»„å·**: æŒ‰åˆ†å€¼è‡ªåŠ¨æ¨èé¢˜ç›®
- **åˆ†å€¼è®¡ç®—**: å®æ—¶éªŒè¯ï¼Œé˜²æ­¢è¶…å‡ºç›®æ ‡åˆ†å€¼
- **è‡ªåŠ¨æ‰¹æ”¹**: å®¢è§‚é¢˜è‡ªåŠ¨è¯„åˆ†
- **æ•™å¸ˆè¯„é˜…**: ä¸»è§‚é¢˜äººå·¥è¯„åˆ†

### 4. çµæ´»çš„è¯ä¹¦ç³»ç»Ÿ
- **å¤šç§è¯ä¹¦**: è€ƒè¯•è¯ä¹¦ã€åŸ¹è®­è¯ä¹¦ã€è£èª‰è¯ä¹¦
- **å·¥æœ¬è´¹ç®¡ç†**: å¯é…ç½®è¯ä¹¦å·¥æœ¬è´¹
- **ç‰©æµè¿½è¸ª**: å®Œæ•´çš„ç‰©æµä¿¡æ¯è®°å½•
- **æ‰«æç‰ˆä¸Šä¼ **: æ”¯æŒçº¸è´¨è¯ä¹¦æ‰«æç‰ˆç®¡ç†

### 5. ç¬¬ä¸‰æ–¹æœåŠ¡é›†æˆ
- **é˜¿é‡Œäº‘ OSS**: æ–‡ä»¶ä¸Šä¼ ã€é¢„ç­¾åURL
- **é˜¿é‡Œäº‘çŸ­ä¿¡**: éªŒè¯ç å‘é€ã€é˜²åˆ·ç­–ç•¥
- **é˜¿é‡Œäº‘å®åè®¤è¯**: èº«ä»½éªŒè¯
- **æ”¯ä»˜å®/å¾®ä¿¡æ”¯ä»˜**: åœ¨çº¿æ”¯ä»˜ã€å¼‚æ­¥å›è°ƒ

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæ¡†æ¶
- **NestJS 11.x** - æ¸è¿›å¼ Node.js æ¡†æ¶
- **TypeScript 5.x** - ç±»å‹å®‰å…¨çš„ JavaScript è¶…é›†
- **MongoDB 8.x** - NoSQL æ•°æ®åº“
- **Mongoose 8.x** - MongoDB ODM

### è®¤è¯æˆæƒ
- **Passport JWT** - JWT è®¤è¯ç­–ç•¥
- **bcrypt** - å¯†ç åŠ å¯†

### æ•°æ®éªŒè¯
- **class-validator** - DTO éªŒè¯
- **class-transformer** - ç±»å‹è½¬æ¢
- **zod** - Schema éªŒè¯

### ç¬¬ä¸‰æ–¹æœåŠ¡
- **é˜¿é‡Œäº‘ OSS** - å¯¹è±¡å­˜å‚¨æœåŠ¡
- **é˜¿é‡Œäº‘çŸ­ä¿¡** - çŸ­ä¿¡éªŒè¯ç 
- **é˜¿é‡Œäº‘å®åè®¤è¯** - èº«ä»½éªŒè¯
- **æ”¯ä»˜å® SDK** - æ”¯ä»˜é›†æˆ
- **å¾®ä¿¡æ”¯ä»˜** - æ”¯ä»˜é›†æˆ

### å¼€å‘å·¥å…·
- **ESLint** - ä»£ç æ£€æŸ¥
- **Prettier** - ä»£ç æ ¼å¼åŒ–
- **Swagger** - API æ–‡æ¡£ç”Ÿæˆ
- **Jest** - å•å…ƒæµ‹è¯•

---

## ğŸ¨ åŠŸèƒ½æ¨¡å—

### 1ï¸âƒ£ ç®¡ç†ç«¯æ¨¡å— (Admin)

#### ğŸ” è®¤è¯ç®¡ç†
- **POST** `/api/admin/auth/login` - ç®¡ç†å‘˜ç™»å½•

#### ğŸ‘¥ ç”¨æˆ·ç®¡ç†
- **POST** `/api/admin/users/admins` - åˆ›å»ºç®¡ç†å‘˜è´¦å·
- **POST** `/api/admin/users/students` - åˆ›å»ºå­¦ç”Ÿè´¦å·
- **POST** `/api/admin/users/teachers` - åˆ›å»ºæ•™å¸ˆè´¦å·
- **GET** `/api/admin/users` - è·å–ç”¨æˆ·åˆ—è¡¨ï¼ˆå¯æŒ‰è§’è‰²ç­›é€‰ï¼‰
- **GET** `/api/admin/users/students` - è·å–å­¦ç”Ÿåˆ—è¡¨
- **GET** `/api/admin/users/teachers` - è·å–æ•™å¸ˆåˆ—è¡¨
- **GET** `/api/admin/users/:id` - è·å–ç”¨æˆ·è¯¦æƒ…
- **PUT** `/api/admin/users/:id` - æ›´æ–°ç”¨æˆ·ä¿¡æ¯
- **DELETE** `/api/admin/users/:id` - åˆ é™¤ç”¨æˆ·ï¼ˆè½¯åˆ é™¤ï¼‰
- **POST** `/api/admin/users/:id/reset-password` - é‡ç½®ç”¨æˆ·å¯†ç 

#### ğŸ“š æŠ¥è€ƒç®¡ç†
- **POST** `/api/admin/enroll/projects` - åˆ›å»ºæŠ¥è€ƒé¡¹ç›®
- **PUT** `/api/admin/enroll/projects/:id` - æ›´æ–°æŠ¥è€ƒé¡¹ç›®
- **DELETE** `/api/admin/enroll/projects/:id` - åˆ é™¤æŠ¥è€ƒé¡¹ç›®
- **GET** `/api/admin/enroll/projects` - è·å–é¡¹ç›®åˆ—è¡¨ï¼ˆæ”¯æŒæœç´¢ï¼‰

#### ğŸ“– è¯¾ç¨‹ç®¡ç†
- **GET** `/api/admin/course/upload-url` - è·å–OSSæ–‡ä»¶ä¸Šä¼ åœ°å€
- **POST** `/api/admin/course/courses` - åˆ›å»ºè¯¾ç¨‹ï¼ˆæ”¯æŒå…è´¹/æ”¶è´¹ï¼‰
- **PUT** `/api/admin/course/courses/:id` - æ›´æ–°è¯¾ç¨‹
- **DELETE** `/api/admin/course/courses/:id` - åˆ é™¤è¯¾ç¨‹
- **GET** `/api/admin/course/courses` - è·å–è¯¾ç¨‹åˆ—è¡¨ï¼ˆæ”¯æŒæœç´¢ï¼‰
- **POST** `/api/admin/course/lessons` - åˆ›å»ºç« èŠ‚ï¼ˆæ”¯æŒè§†é¢‘/PDFï¼‰
- **PUT** `/api/admin/course/lessons/:id` - æ›´æ–°ç« èŠ‚
- **DELETE** `/api/admin/course/lessons/:id` - åˆ é™¤ç« èŠ‚

#### ğŸ“ é¢˜åº“ç®¡ç†
- **POST** `/api/admin/question-bank/banks` - åˆ›å»ºé¢˜åº“
- **GET** `/api/admin/question-bank/banks` - è·å–é¢˜åº“åˆ—è¡¨ï¼ˆæ”¯æŒæœç´¢ï¼‰
- **POST** `/api/admin/question-bank/banks/:bankId/questions` - åˆ›å»ºé¢˜ç›®
- **PUT** `/api/admin/question-bank/questions/:id` - æ›´æ–°é¢˜ç›®
- **DELETE** `/api/admin/question-bank/questions/:id` - åˆ é™¤é¢˜ç›®

#### ğŸ“‹ è€ƒè¯•ç®¡ç†
- **POST** `/api/admin/exam/configs` - åˆ›å»ºè€ƒè¯•é…ç½®ï¼ˆæ”¯æŒ3ç§ç±»å‹ï¼‰
- **PUT** `/api/admin/exam/configs/:id` - æ›´æ–°è€ƒè¯•é…ç½®
- **GET** `/api/admin/exam/sessions` - æŸ¥çœ‹è€ƒè¯•è®°å½•

#### ğŸ¯ è€ƒè¯•ç»„å· ğŸ†•
- **GET** `/api/admin/exam-builder/questions` - è·å–å¯é€‰é¢˜ç›®åˆ—è¡¨
- **POST** `/api/admin/exam-builder/calculate-score` - è®¡ç®—å·²é€‰é¢˜ç›®æ€»åˆ†
- **POST** `/api/admin/exam-builder/validate-selection` - éªŒè¯é¢˜ç›®é€‰æ‹©
- **GET** `/api/admin/exam-builder/question-counts` - è·å–é¢˜åº“å„é¢˜å‹æ•°é‡ç»Ÿè®¡
- **GET** `/api/admin/exam-builder/question-details` - è·å–é¢˜ç›®è¯¦æƒ…åˆ—è¡¨

#### ğŸ“ è€ƒè¯•è¯„é˜…ç®¡ç†
- **GET** `/api/admin/exam-review/pending` - è·å–å¾…åˆ†é…è¯„é˜…çš„è€ƒè¯•ä¼šè¯åˆ—è¡¨
- **POST** `/api/admin/exam-review/:sessionId/assign-reviewer` - æ‰‹åŠ¨åˆ†é…è¯„é˜…è€å¸ˆ
- **POST** `/api/admin/exam-review/:sessionId/auto-assign` - è‡ªåŠ¨åˆ†é…è¯„é˜…è€å¸ˆ
- **POST** `/api/admin/exam-review/batch-auto-assign` - æ‰¹é‡è‡ªåŠ¨åˆ†é…è¯„é˜…è€å¸ˆ

#### ğŸ’³ è®¢å•ç®¡ç†
- **GET** `/api/admin/orders` - è·å–è®¢å•åˆ—è¡¨
- **PUT** `/api/admin/orders/:id/cancel` - å–æ¶ˆè®¢å•
- **GET** `/api/admin/orders/refunds/list` - è·å–é€€æ¬¾ç”³è¯·åˆ—è¡¨
- **PUT** `/api/admin/orders/:id/refund/review` - å®¡æ ¸é€€æ¬¾ç”³è¯·

#### ğŸ“ è¯ä¹¦é…ç½®ç®¡ç†
- **POST** `/api/admin/certificate/categories` - åˆ›å»ºè¯ä¹¦åˆ†ç±»
- **POST** `/api/admin/certificate/levels` - åˆ›å»ºè¯ä¹¦ç­‰çº§
- **POST** `/api/admin/certificate/configs` - åˆ›å»ºè¯ä¹¦é…ç½®

#### ğŸ“ è¯ä¹¦å®ä¾‹ç®¡ç† ğŸ†•
- **GET** `/api/admin/certificate-management/list` - è·å–è¯ä¹¦åˆ—è¡¨
- **GET** `/api/admin/certificate-management/:id` - è·å–è¯ä¹¦è¯¦æƒ…
- **POST** `/api/admin/certificate-management/:id/upload-scan` - ä¸Šä¼ çº¸è´¨è¯ä¹¦æ‰«æç‰ˆ ğŸ†•
- **DELETE** `/api/admin/certificate-management/:id/scan` - åˆ é™¤çº¸è´¨è¯ä¹¦æ‰«æç‰ˆ ğŸ†•

#### ğŸ“¦ ç‰©æµç®¡ç†
- **POST** `/api/admin/logistics` - åˆ›å»ºç‰©æµè®°å½•
- **PUT** `/api/admin/logistics/:id` - æ›´æ–°ç‰©æµä¿¡æ¯
- **POST** `/api/admin/logistics/:id/tracking` - æ·»åŠ ç‰©æµè½¨è¿¹

#### ğŸ“° å†…å®¹ç®¡ç†
- **POST** `/api/admin/modules` - åˆ›å»ºæ¨¡å—ï¼ˆå…¬å‘Š/è½®æ’­/è€ƒåŸ¹åŠ¨æ€ï¼‰
- **PUT** `/api/admin/modules/:id` - æ›´æ–°æ¨¡å—
- **DELETE** `/api/admin/modules/:id` - åˆ é™¤æ¨¡å—
- **GET** `/api/admin/modules` - è·å–æ¨¡å—åˆ—è¡¨

#### â“ å¸¸è§é—®é¢˜ç®¡ç†
- **POST** `/api/admin/faq` - åˆ›å»ºå¸¸è§é—®é¢˜
- **PUT** `/api/admin/faq/:id` - æ›´æ–°å¸¸è§é—®é¢˜
- **DELETE** `/api/admin/faq/:id` - åˆ é™¤å¸¸è§é—®é¢˜
- **GET** `/api/admin/faq` - è·å–å¸¸è§é—®é¢˜åˆ—è¡¨

#### âš™ï¸ é…ç½®ç®¡ç†
- **POST** `/api/admin/config` - åˆ›å»ºé…ç½®é¡¹
- **PUT** `/api/admin/config/:id` - æ›´æ–°é…ç½®é¡¹
- **DELETE** `/api/admin/config/:id` - åˆ é™¤é…ç½®é¡¹
- **GET** `/api/admin/config` - è·å–é…ç½®é¡¹åˆ—è¡¨

#### ğŸ‘¨â€ğŸ« æ•™å¸ˆè®¤è¯ç®¡ç†
- **GET** `/api/admin/teacher-certification/pending` - è·å–å¾…å®¡æ ¸çš„æ•™å¸ˆè®¤è¯åˆ—è¡¨
- **GET** `/api/admin/teacher-certification/all` - è·å–æ‰€æœ‰æ•™å¸ˆè®¤è¯åˆ—è¡¨
- **GET** `/api/admin/teacher-certification/:id` - è·å–æ•™å¸ˆè®¤è¯è¯¦æƒ…
- **POST** `/api/admin/teacher-certification/:id/review` - å®¡æ ¸æ•™å¸ˆè®¤è¯
- **GET** `/api/admin/teacher-certification/config/fields` - è·å–æ•™å¸ˆè®¤è¯å¿…å¡«å­—æ®µé…ç½®
- **POST** `/api/admin/teacher-certification/config/fields` - æ›´æ–°æ•™å¸ˆè®¤è¯å¿…å¡«å­—æ®µé…ç½®

#### ğŸ“‹ æŠ¥åå®¡æ ¸ç®¡ç†
- **GET** `/api/admin/enrollment-review/pending` - è·å–å¾…å®¡æ ¸çš„æŠ¥åç”³è¯·åˆ—è¡¨
- **GET** `/api/admin/enrollment-review/:id` - è·å–æŠ¥åç”³è¯·è¯¦æƒ…
- **POST** `/api/admin/enrollment-review/:id/review` - å®¡æ ¸æŠ¥åç”³è¯·

---

### 2ï¸âƒ£ æ•™å¸ˆç«¯æ¨¡å— (Teacher)

#### ğŸ” è®¤è¯ç®¡ç†
- **POST** `/api/teacher/auth/send-code` - å‘é€éªŒè¯ç 
- **POST** `/api/teacher/auth/register` - æ•™å¸ˆæ³¨å†Œï¼ˆéœ€å®¡æ ¸ï¼‰
- **POST** `/api/teacher/auth/login` - æ•™å¸ˆç™»å½•

#### ğŸ“ è®¤è¯ç®¡ç†
- **POST** `/api/teacher/certification/save` - ä¿å­˜è®¤è¯ä¿¡æ¯ï¼ˆè‰ç¨¿ï¼‰
- **POST** `/api/teacher/certification/submit` - æäº¤è®¤è¯ç”³è¯·
- **GET** `/api/teacher/certification/my` - è·å–æˆ‘çš„è®¤è¯ä¿¡æ¯
- **GET** `/api/teacher/certification/status` - æ£€æŸ¥è®¤è¯çŠ¶æ€
- **GET** `/api/teacher/certification/config/fields` - è·å–æ•™å¸ˆè®¤è¯å¿…å¡«å­—æ®µé…ç½®

#### ğŸ“± å¾®è¯¾å ‚ç®¡ç†
- **POST** `/api/teacher/micro-courses` - åˆ›å»ºå¾®è¯¾å ‚
- **PUT** `/api/teacher/micro-courses/:id` - æ›´æ–°å¾®è¯¾å ‚
- **DELETE** `/api/teacher/micro-courses/:id` - åˆ é™¤å¾®è¯¾å ‚
- **GET** `/api/teacher/micro-courses` - è·å–æˆ‘çš„å¾®è¯¾å ‚åˆ—è¡¨
- **POST** `/api/teacher/micro-courses/:id/publish` - å‘å¸ƒå¾®è¯¾å ‚
- **POST** `/api/teacher/micro-courses/:id/offline` - ä¸‹çº¿å¾®è¯¾å ‚
- **GET** `/api/teacher/micro-courses/stats/monthly` - è·å–æœˆåº¦ç»Ÿè®¡

#### ğŸ“Š è¯„åˆ†è¯„å®¡
- **GET** `/api/teacher/exam-review/my-tasks` - è·å–æˆ‘çš„ä¸»è§‚é¢˜è¯„åˆ†ä»»åŠ¡
- **POST** `/api/teacher/exam-review/tasks/:taskId/submit` - æäº¤ä¸»è§‚é¢˜è¯„åˆ†

---

### 3ï¸âƒ£ å­¦ç”Ÿç«¯æ¨¡å— (Student)

#### ğŸ” è®¤è¯ç®¡ç†
- **POST** `/api/student/auth/send-code` - å‘é€éªŒè¯ç 
- **POST** `/api/student/auth/register` - å­¦ç”Ÿæ³¨å†Œ
- **POST** `/api/student/auth/login` - å­¦ç”Ÿç™»å½•

#### ğŸ“š è¯¾ç¨‹å­¦ä¹ 
- **GET** `/api/student/course/courses` - è·å–è¯¾ç¨‹åˆ—è¡¨
- **GET** `/api/student/course/courses/:id` - è·å–è¯¾ç¨‹è¯¦æƒ…ï¼ˆå«è´­ä¹°çŠ¶æ€ï¼‰
- **GET** `/api/student/course/courses/:id/lessons` - è·å–ç« èŠ‚åˆ—è¡¨ï¼ˆæƒé™éªŒè¯ï¼‰
- **GET** `/api/student/course/lessons/:id` - è·å–ç« èŠ‚è¯¦æƒ…ï¼ˆæƒé™éªŒè¯ï¼‰
- **POST** `/api/student/course/learning-records` - æ›´æ–°å­¦ä¹ è®°å½•
- **POST** `/api/student/course/bookmarks` - æ·»åŠ ä¹¦ç­¾
- **GET** `/api/student/course/my-courses` - æˆ‘çš„è¯¾ç¨‹
- **GET** `/api/student/course/my-courses/:courseId/progress` - å­¦ä¹ è¿›åº¦
- **POST** `/api/student/course/repurchase` - é‡æ–°è´­ä¹°è¯¾ç¨‹ï¼ˆè€ƒè¯•æ¬¡æ•°ç”¨å®Œåï¼‰
- **GET** `/api/student/course/purchase-eligibility/:courseId` - æ£€æŸ¥è¯¾ç¨‹è´­ä¹°èµ„æ ¼

#### ğŸ“š å­¦ä¹ è¿›åº¦ç®¡ç†
- **POST** `/api/student/learning-progress/start` - å¼€å§‹å­¦ä¹ è¯¾ç¨‹
- **POST** `/api/student/learning-progress/lesson-completed` - æ ‡è®°ç« èŠ‚å®Œæˆ
- **POST** `/api/student/learning-progress/bookmark` - æ·»åŠ /æ›´æ–°ä¹¦ç­¾
- **GET** `/api/student/learning-progress/:courseId` - è·å–å­¦ä¹ è¿›åº¦

#### ğŸ“ æŠ¥åç”³è¯·
- **GET** `/api/student/enroll/projects` - è·å–æŠ¥è€ƒé¡¹ç›®
- **POST** `/api/student/enroll/applications` - æäº¤æŠ¥åç”³è¯·
- **GET** `/api/student/enroll/my-applications` - æˆ‘çš„ç”³è¯·è®°å½•
- **GET** `/api/student/enroll/my-applications/:id/progress` - è·å–æŠ¥è€ƒè¯¦æƒ…ï¼ˆå«è¿›åº¦ï¼‰
- **GET** `/api/student/enroll/applications/:id/certificate-eligibility` - æ£€æŸ¥è¯ä¹¦èµ„æ ¼

#### ğŸ“ æŠ¥åä¿¡æ¯æäº¤
- **POST** `/api/student/enrollment/submit-application` - æäº¤æŠ¥åè¯¦ç»†ä¿¡æ¯
- **GET** `/api/student/enrollment/my-application` - è·å–æˆ‘çš„æŠ¥åç”³è¯·

#### ğŸ“‹ åœ¨çº¿è€ƒè¯•
- **POST** `/api/student/exam/configs/:configId/start` - å¼€å§‹è€ƒè¯•
- **GET** `/api/student/exam/sessions/:sessionId` - è·å–è€ƒè¯•è¯¦æƒ…
- **POST** `/api/student/exam/sessions/:sessionId/submit` - æäº¤è€ƒè¯•ç­”æ¡ˆ
- **GET** `/api/student/exam/my-exams` - æˆ‘çš„è€ƒè¯•è®°å½•

#### ğŸ“ è¯ä¹¦ç®¡ç†
- **GET** `/api/student/certificate/my-certificates` - è·å–æˆ‘çš„è¯ä¹¦åˆ—è¡¨
- **GET** `/api/student/certificate/query-url` - è·å–è¯ä¹¦æŸ¥è¯¢ç½‘ç«™é“¾æ¥

#### ğŸ’³ è®¢å•ç®¡ç†
- **POST** `/api/student/orders` - åˆ›å»ºè®¢å•ï¼ˆè¯¾ç¨‹/è¯ä¹¦ï¼‰
- **GET** `/api/student/orders` - è·å–æˆ‘çš„è®¢å•åˆ—è¡¨
- **GET** `/api/student/orders/:id` - è·å–è®¢å•è¯¦æƒ…
- **POST** `/api/student/orders/:id/refund` - ç”³è¯·é€€æ¬¾
- **GET** `/api/student/orders/refunds/my` - è·å–æˆ‘çš„é€€æ¬¾ç”³è¯·åˆ—è¡¨

#### ğŸ‘¨â€ğŸ« æ•™å¸ˆåˆ—è¡¨
- **GET** `/api/student/teacher/list` - è·å–è®¤è¯æ•™å¸ˆåˆ—è¡¨ï¼ˆæ”¯æŒæœç´¢ï¼‰

#### â“ å¸¸è§é—®é¢˜
- **GET** `/api/student/faq/list` - è·å–å¸¸è§é—®é¢˜åˆ—è¡¨

#### âš™ï¸ é…ç½®è·å–
- **GET** `/api/student/config/list` - è·å–é…ç½®é¡¹åˆ—è¡¨

---

### 4ï¸âƒ£ å…¬å¼€æ¥å£ (Public API)

#### ğŸ“° æ¨¡å—å†…å®¹
- **GET** `/api/api/modules` - è·å–æ¨¡å—åˆ—è¡¨ï¼ˆå…¬å‘Š/è½®æ’­/è€ƒåŸ¹åŠ¨æ€ï¼‰

æŸ¥è¯¢å‚æ•°ï¼š
- `type`: ç±»åˆ«ç­›é€‰ï¼ˆå¯é€‰ï¼‰- `announcement`(å…¬å‘Š) | `banner`(è½®æ’­) | `training_news`(è€ƒåŸ¹åŠ¨æ€)
- `page`: é¡µç ï¼ˆå¯é€‰ï¼Œé»˜è®¤1ï¼‰
- `limit`: æ¯é¡µæ•°é‡ï¼ˆå¯é€‰ï¼Œé»˜è®¤20ï¼‰

#### ğŸ’° æ”¯ä»˜å›è°ƒ
- **POST** `/api/api/payment/alipay/notify` - æ”¯ä»˜å®æ”¯ä»˜å›è°ƒ
- **POST** `/api/api/payment/wechat/notify` - å¾®ä¿¡æ”¯ä»˜å›è°ƒ

> ğŸ“Œ **è¯´æ˜**: å…¬å¼€æ¥å£ä¸éœ€è¦ token è®¤è¯ï¼Œå¯ç›´æ¥è®¿é—®

---

> ğŸ†• æ ‡æ³¨çš„æ¥å£ä¸º v2.4.0 æ–°å¢æ¥å£

---

## ğŸ“¡ API å“åº”æ ¼å¼

### ç»Ÿä¸€å“åº”ç»“æ„

æ‰€æœ‰ API æ¥å£éƒ½è¿”å›ç»Ÿä¸€çš„å“åº”æ ¼å¼ï¼š

```typescript
{
  code: number      // çŠ¶æ€ç ï¼š0è¡¨ç¤ºæˆåŠŸï¼Œå…¶ä»–è¡¨ç¤ºé”™è¯¯ç 
  message: string   // å“åº”æ¶ˆæ¯ï¼šæˆåŠŸ='success'ï¼Œå¤±è´¥=å…·ä½“é”™è¯¯ä¿¡æ¯
  timestamp: string // ISOæ ¼å¼æ—¶é—´æˆ³ï¼Œå¦‚ '2025-12-07T12:00:00.000Z'
  data: object      // å“åº”æ•°æ®ï¼šæˆåŠŸæ—¶æœ‰å†…å®¹ï¼Œå¤±è´¥æ—¶ä¸ºç©ºå¯¹è±¡ {}
}
```

**é‡è¦**: å‚æ•°éªŒè¯é”™è¯¯ä¼šå°†è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯è¿”å›åˆ° `message` å­—æ®µä¸­ï¼Œä¾‹å¦‚ï¼š
- "è®¢å•é‡‘é¢ä¸èƒ½ä¸ºç©º; è®¢å•ç±»å‹å¿…é¡»æ˜¯ course æˆ– certificate"
- "æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®"

> ğŸ“– **è¯¦ç»†è¯´æ˜**: æŸ¥çœ‹ [VALIDATION_ERROR_HANDLING.md](./VALIDATION_ERROR_HANDLING.md)

### æˆåŠŸå“åº”ç¤ºä¾‹

#### å•ä¸ªå¯¹è±¡å“åº”
```json
{
  "code": 0,
  "message": "success",
  "timestamp": "2025-12-07T12:00:00.000Z",
  "data": {
    "_id": "60d0fe4f5311b0001c8e4781",
    "name": "å¿ƒç†å’¨è¯¢å¸ˆè®¤è¯",
    "price": 299900,
    "status": "active"
  }
}
```

#### åˆ†é¡µåˆ—è¡¨å“åº”
```json
{
  "code": 0,
  "message": "success",
  "timestamp": "2025-12-07T12:00:00.000Z",
  "data": {
    "list": [
      {
        "_id": "60d0fe4f5311b0001c8e4781",
        "name": "å¿ƒç†å’¨è¯¢å¸ˆè®¤è¯",
        "status": "active"
      }
    ],
    "total": 100,
    "page": 1,
    "limit": 20
  }
}
```

#### ç®€å•æ¶ˆæ¯å“åº”
```json
{
  "code": 0,
  "message": "success",
  "timestamp": "2025-12-07T12:00:00.000Z",
  "data": {
    "message": "æ“ä½œæˆåŠŸ"
  }
}
```

### é”™è¯¯å“åº”ç¤ºä¾‹

#### ä¸šåŠ¡é”™è¯¯
```json
{
  "code": 1004,
  "message": "èµ„æºä¸å­˜åœ¨",
  "timestamp": "2025-12-07T12:00:00.000Z",
  "data": {}
}
```

#### å‚æ•°éªŒè¯é”™è¯¯
```json
{
  "code": 400,
  "message": "è®¢å•é‡‘é¢ä¸èƒ½ä¸ºç©º; è®¢å•ç±»å‹å¿…é¡»æ˜¯ course æˆ– certificate",
  "timestamp": "2025-12-07T12:00:00.000Z",
  "data": {}
}
```

### å¸¸ç”¨çŠ¶æ€ç 

| code | è¯´æ˜ | åœºæ™¯ |
|------|------|------|
| 0 | æˆåŠŸ | è¯·æ±‚æ­£å¸¸å¤„ç† |
| 1000 | è¯·æ±‚å‚æ•°é”™è¯¯ | å‚æ•°ç¼ºå¤±æˆ–æ ¼å¼é”™è¯¯ |
| 1001 | æœªæˆæƒ | æœªç™»å½•æˆ– token æ— æ•ˆ |
| 1003 | æ— æƒé™ | è§’è‰²æƒé™ä¸è¶³ |
| 1004 | èµ„æºä¸å­˜åœ¨ | æŸ¥è¯¢çš„æ•°æ®ä¸å­˜åœ¨ |
| 1500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ | ç³»ç»Ÿå¼‚å¸¸ |
| 2xxx | ç”¨æˆ·ç›¸å…³é”™è¯¯ | ç”¨æˆ·æ³¨å†Œã€ç™»å½•ç­‰ |
| 4xxx | æŠ¥è€ƒç›¸å…³é”™è¯¯ | æŠ¥è€ƒç”³è¯·ã€å®¡æ ¸ç­‰ |
| 5xxx | è¯¾ç¨‹ç›¸å…³é”™è¯¯ | è¯¾ç¨‹è´­ä¹°ã€å­¦ä¹ ç­‰ |
| 6xxx | è€ƒè¯•ç›¸å…³é”™è¯¯ | è€ƒè¯•æ¬¡æ•°ã€æˆç»©ç­‰ |
| 7xxx | è®¢å•ç›¸å…³é”™è¯¯ | è®¢å•æ”¯ä»˜ã€é€€æ¬¾ç­‰ |

> ğŸ“– **å®Œæ•´é”™è¯¯ç åˆ—è¡¨**: æŸ¥çœ‹ `src/common/enums/exception-code.enum.ts`

### Swagger æ–‡æ¡£

é¡¹ç›®é›†æˆäº†å®Œæ•´çš„ Swagger API æ–‡æ¡£ï¼Œæ‰€æœ‰æ¥å£éƒ½åŒ…å«ï¼š
- âœ… è¯¦ç»†çš„è¯·æ±‚å‚æ•°è¯´æ˜
- âœ… å®Œæ•´çš„å“åº”ç»“æ„å®šä¹‰
- âœ… çœŸå®çš„å“åº”ç¤ºä¾‹æ•°æ®
- âœ… é”™è¯¯ç è¯´æ˜

**è®¿é—®åœ°å€**: http://localhost:3000/docs

> ğŸ“š **å¼€å‘æŒ‡å—**: æŸ¥çœ‹ [SWAGGER_GUIDE.md](./SWAGGER_GUIDE.md) äº†è§£å¦‚ä½•ä¸ºæ–°æ¥å£æ·»åŠ æ–‡æ¡£

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **Node.js** >= 18.x
- **pnpm** >= 8.x
- **MongoDB** >= 5.x
- **Redis** >= 6.x (å¯é€‰)

### å®‰è£…ä¾èµ–

```bash
# ä½¿ç”¨ pnpm å®‰è£…ä¾èµ–
pnpm install
```

### é…ç½®æ–‡ä»¶

å¤åˆ¶é…ç½®æ–‡ä»¶æ¨¡æ¿ï¼š

```bash
# å¼€å‘ç¯å¢ƒ
cp config/dev.config.example.js config/dev.config.js

# æœ¬åœ°ç¯å¢ƒï¼ˆå¯é€‰ï¼‰
cp config/local.config.example.js config/local.config.js
```

ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œå¡«å…¥å¿…è¦çš„é…ç½®ä¿¡æ¯ï¼ˆè¯¦è§[é…ç½®è¯´æ˜](#âš™ï¸-é…ç½®è¯´æ˜)ï¼‰ã€‚

### å¯åŠ¨æœåŠ¡

```bash
# å¼€å‘æ¨¡å¼ï¼ˆç›‘å¬æ–‡ä»¶å˜åŒ–è‡ªåŠ¨é‡å¯ï¼‰
pnpm run dev

# ä½¿ç”¨æœ¬åœ°é…ç½®
pnpm run dev:local

# æ™®é€šå¯åŠ¨
pnpm run start

# ç”Ÿäº§ç¯å¢ƒ
pnpm run build
pnpm run prod
```

### è®¿é—®æœåŠ¡

æœåŠ¡å¯åŠ¨åï¼Œå¯ä»¥è®¿é—®ï¼š
- ğŸš€ **API æœåŠ¡**: http://localhost:3000/api
- ğŸ“š **API æ–‡æ¡£**: http://localhost:3000/docs
- ğŸ“„ **OpenAPI JSON**: http://localhost:3000/api/openapi.json
- ğŸ“„ **OpenAPI YAML**: http://localhost:3000/api/openapi.yaml

---

## âš™ï¸ é…ç½®è¯´æ˜

### åŸºç¡€é…ç½®

```javascript
module.exports = {
  // æœåŠ¡ç«¯å£
  port: 3000,
  
  // MongoDB é…ç½®
  mongodb: {
    uri: 'mongodb://localhost:27017',
    dbName: 'yuan_teaching_dev',
  },
  
  // JWT é…ç½®
  jwt: {
    secret: 'your-secret-key',      // åŠ¡å¿…ä¿®æ”¹ï¼
    expiresIn: '7d',                // Token æœ‰æ•ˆæœŸ
    refreshExpiresIn: '30d',        // åˆ·æ–° Token æœ‰æ•ˆæœŸ
  },
  
  // Redis é…ç½®ï¼ˆå¯é€‰ï¼‰
  redis: {
    host: 'localhost',
    port: 6379,
    db: 0,
  },
  
  // API æ–‡æ¡£é…ç½®
  docs: {
    enabled: true,                  // ç”Ÿäº§ç¯å¢ƒå»ºè®®å…³é—­
    path: '/docs',
  },
}
```

### é˜¿é‡Œäº‘æœåŠ¡é…ç½®

#### OSS å¯¹è±¡å­˜å‚¨
```javascript
oss: {
  region: 'oss-cn-hangzhou',
  accessKeyId: process.env.ALI_OSS_ACCESS_KEY_ID || '',
  accessKeySecret: process.env.ALI_OSS_ACCESS_KEY_SECRET || '',
  bucket: process.env.ALI_OSS_BUCKET || '',
}
```

#### çŸ­ä¿¡æœåŠ¡
```javascript
sms: {
  accessKeyId: process.env.ALI_SMS_ACCESS_KEY_ID || '',
  accessKeySecret: process.env.ALI_SMS_ACCESS_KEY_SECRET || '',
  signName: 'è‚²å®‰æ•™è‚²',
  templateCode: {
    login: 'SMS_463900387',
    register: 'SMS_463970414',
  },
}
```

#### å®åè®¤è¯
```javascript
realname: {
  accessKeyId: process.env.ALI_REALNAME_ACCESS_KEY_ID || '',
  accessKeySecret: process.env.ALI_REALNAME_ACCESS_KEY_SECRET || '',
}
```

### æ”¯ä»˜é…ç½®

#### æ”¯ä»˜å®
```javascript
alipay: {
  appId: process.env.ALIPAY_APP_ID || '',
  privateKey: process.env.ALIPAY_PRIVATE_KEY || '',
  alipayPublicKey: process.env.ALIPAY_PUBLIC_KEY || '',
  gateway: 'https://openapi.alipay.com/gateway.do',
  notifyUrl: 'https://your-domain.com/api/payment/alipay/notify',
  returnUrl: 'https://your-domain.com/payment/success',
}
```

#### å¾®ä¿¡æ”¯ä»˜
```javascript
wechatPay: {
  appId: process.env.WECHAT_APP_ID || '',
  mchId: process.env.WECHAT_MCH_ID || '',
  apiKey: process.env.WECHAT_API_KEY || '',
  apiV3Key: process.env.WECHAT_API_V3_KEY || '',
  serialNo: process.env.WECHAT_SERIAL_NO || '',
  privateKey: process.env.WECHAT_PRIVATE_KEY || '',
  notifyUrl: 'https://your-domain.com/api/payment/wechat/notify',
}
```

### ç¯å¢ƒå˜é‡

æ¨èä½¿ç”¨ `.env` æ–‡ä»¶ç®¡ç†æ•æ„Ÿä¿¡æ¯ï¼š

```bash
# é˜¿é‡Œäº‘ OSS
ALI_OSS_ACCESS_KEY_ID=your_key_id
ALI_OSS_ACCESS_KEY_SECRET=your_key_secret
ALI_OSS_BUCKET=your_bucket_name

# é˜¿é‡Œäº‘çŸ­ä¿¡
ALI_SMS_ACCESS_KEY_ID=your_key_id
ALI_SMS_ACCESS_KEY_SECRET=your_key_secret

# é˜¿é‡Œäº‘å®åè®¤è¯
ALI_REALNAME_ACCESS_KEY_ID=your_key_id
ALI_REALNAME_ACCESS_KEY_SECRET=your_key_secret

# æ”¯ä»˜å®
ALIPAY_APP_ID=your_app_id
ALIPAY_PRIVATE_KEY=your_private_key
ALIPAY_PUBLIC_KEY=alipay_public_key

# å¾®ä¿¡æ”¯ä»˜
WECHAT_APP_ID=your_app_id
WECHAT_MCH_ID=your_mch_id
WECHAT_API_KEY=your_api_key
```

---

## ğŸ“– API æ–‡æ¡£

### Swagger æ–‡æ¡£

å¯åŠ¨æœåŠ¡åè®¿é—®: http://localhost:3000/docs

Swagger æ–‡æ¡£æä¾›ï¼š
- ğŸ“‹ æ‰€æœ‰ API æ¥å£åˆ—è¡¨
- ğŸ“ è¯·æ±‚/å“åº”å‚æ•°è¯´æ˜
- ğŸ”§ åœ¨çº¿æµ‹è¯•å·¥å…·
- ğŸ“„ Schema å®šä¹‰

### OpenAPI è§„èŒƒ

- **JSON æ ¼å¼**: http://localhost:3000/api/openapi.json
- **YAML æ ¼å¼**: http://localhost:3000/api/openapi.yaml

å¯ä»¥å¯¼å…¥åˆ° Postmanã€Apifox ç­‰ API å·¥å…·ä¸­ä½¿ç”¨ã€‚

---

## ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡

### æ ¸å¿ƒæ•°æ®æ¨¡å‹

#### ç”¨æˆ·æ¨¡å‹ (User)
```typescript
{
  phone: string           // æ‰‹æœºå·ï¼ˆå”¯ä¸€ï¼‰
  password: string        // åŠ å¯†å¯†ç 
  name: string           // å§“å
  role: number           // è§’è‰²ï¼š0=ç®¡ç†å‘˜ | 1=æ•™å¸ˆ | 2=å­¦ç”Ÿ
  status: string         // çŠ¶æ€ï¼šactive | inactive
  lastLoginAt: Date      // æœ€åç™»å½•æ—¶é—´
  lastLoginIp: string    // æœ€åç™»å½•IP
}
```

#### è¯¾ç¨‹æ¨¡å‹ (Course)
```typescript
{
  name: string           // è¯¾ç¨‹åç§°
  description: string    // è¯¾ç¨‹æè¿°
  coverUrl: string       // å°é¢å›¾ç‰‡
  projectId: ObjectId    // å…³è”æŠ¥è€ƒé¡¹ç›®
  instructorId: ObjectId // è®²å¸ˆID
  isFree: boolean        // æ˜¯å¦å…è´¹
  price: number          // è¯¾ç¨‹ä»·æ ¼
  hasExam: boolean       // æ˜¯å¦åŒ…å«è€ƒè¯•
  status: string         // çŠ¶æ€ï¼šactive | inactive
  lessonCount: number    // ç« èŠ‚æ•°
  totalDuration: number  // æ€»æ—¶é•¿ï¼ˆç§’ï¼‰
}
```

#### è€ƒè¯•é…ç½®æ¨¡å‹ (ExamConfig)
```typescript
{
  projectId: ObjectId    // å…³è”é¡¹ç›®
  courseId: ObjectId     // å…³è”è¯¾ç¨‹
  questionBankId: ObjectId  // é¢˜åº“ID
  examType: string       // è€ƒè¯•ç±»å‹ï¼šmultiple_choice | mc_report | thesis
  typeConfig: Object     // è€ƒè¯•ç±»å‹è¯¦ç»†é…ç½®
  totalScore: number     // æ€»åˆ†
  passScore: number      // åŠæ ¼åˆ†
  status: string         // çŠ¶æ€
}
```

#### è¯ä¹¦æ¨¡å‹ (Certificate)
```typescript
{
  certificateNo: string  // è¯ä¹¦ç¼–å·
  userId: ObjectId       // ç”¨æˆ·ID
  projectId: ObjectId    // é¡¹ç›®ID
  examSessionId: ObjectId // è€ƒè¯•ä¼šè¯ID
  type: string           // è¯ä¹¦ç±»å‹
  name: string           // è¯ä¹¦åç§°
  level: string          // çº§åˆ«
  holderInfo: Object     // æŒè¯äººä¿¡æ¯
  status: string         // çŠ¶æ€
  needPhysical: boolean  // æ˜¯å¦éœ€è¦çº¸è´¨è¯ä¹¦
  physicalCertificateScanUrl: string // çº¸è´¨è¯ä¹¦æ‰«æç‰ˆURL ğŸ†•
  logisticsId: ObjectId  // ç‰©æµID
}
```

> ğŸ“– **å®Œæ•´æ•°æ®æ¨¡å‹**: æŸ¥çœ‹ `src/libs/database/schemas/` ç›®å½•

---

## ğŸ¯ æ ¸å¿ƒä¸šåŠ¡æµç¨‹

### 1. å­¦ç”ŸæŠ¥è€ƒæµç¨‹

```
å­¦ç”Ÿæ³¨å†Œ â†’ æµè§ˆæŠ¥è€ƒé¡¹ç›® â†’ æäº¤æŠ¥åç”³è¯· â†’ å¡«å†™è¯¦ç»†ä¿¡æ¯ 
â†’ ç®¡ç†å‘˜å®¡æ ¸ â†’ è´­ä¹°è¯¾ç¨‹ â†’ æ”¯ä»˜ â†’ å¼€é€šè¯¾ç¨‹æƒé™ 
â†’ å­¦ä¹ è¯¾ç¨‹ â†’ å‚åŠ è€ƒè¯• â†’ é€šè¿‡è€ƒè¯• â†’ ç”Ÿæˆè¯ä¹¦ 
â†’ æ”¯ä»˜å·¥æœ¬è´¹ â†’ å¡«å†™é‚®å¯„åœ°å€ â†’ ç‰©æµé…é€ï¼ˆçº¸è´¨è¯ä¹¦ï¼‰
â†’ ä¸Šä¼ æ‰«æç‰ˆ
```

### 2. è¯¾ç¨‹å­¦ä¹ æµç¨‹ï¼ˆæ”¶è´¹è¯¾ç¨‹ï¼‰

```
æµè§ˆè¯¾ç¨‹åˆ—è¡¨ â†’ æŸ¥çœ‹è¯¾ç¨‹è¯¦æƒ… â†’ è´­ä¹°è¯¾ç¨‹ â†’ æ”¯ä»˜æˆåŠŸ 
â†’ å¼€é€šè®¿é—®æƒé™ â†’ å¼€å§‹å­¦ä¹  â†’ æŸ¥çœ‹ç« èŠ‚åˆ—è¡¨ 
â†’ å­¦ä¹ ç« èŠ‚å†…å®¹ï¼ˆè§†é¢‘/PDFï¼‰ â†’ è®°å½•å­¦ä¹ è¿›åº¦ 
â†’ æ·»åŠ ä¹¦ç­¾ â†’ å®Œæˆå­¦ä¹ 
```

### 3. è¯¾ç¨‹å­¦ä¹ æµç¨‹ï¼ˆå…è´¹è¯¾ç¨‹ï¼‰

```
æµè§ˆè¯¾ç¨‹åˆ—è¡¨ â†’ æŸ¥çœ‹è¯¾ç¨‹è¯¦æƒ… â†’ æŸ¥çœ‹ç« èŠ‚åˆ—è¡¨ 
â†’ ç›´æ¥å­¦ä¹ ç« èŠ‚å†…å®¹ â†’ è®°å½•å­¦ä¹ è¿›åº¦ â†’ å®Œæˆå­¦ä¹ 
```

### 4. è€ƒè¯•æµç¨‹

```
æŸ¥çœ‹è€ƒè¯•é…ç½® â†’ å¼€å§‹è€ƒè¯•ï¼ˆç”Ÿæˆè¯•å·ï¼‰ â†’ ç­”é¢˜ 
â†’ æäº¤ç­”æ¡ˆ â†’ è‡ªåŠ¨æ‰¹æ”¹å®¢è§‚é¢˜ â†’ ç®¡ç†å‘˜åˆ†é…è¯„é˜…æ•™å¸ˆ
â†’ æ•™å¸ˆè¯„åˆ†ä¸»è§‚é¢˜ â†’ è®¡ç®—æ€»åˆ† â†’ åˆ¤å®šæ˜¯å¦é€šè¿‡
```

### 5. æ•™å¸ˆè®¤è¯è¯„åˆ†æµç¨‹

```
æ•™å¸ˆæ³¨å†Œ â†’ å¡«å†™è®¤è¯ä¿¡æ¯ â†’ æäº¤è®¤è¯ â†’ ç®¡ç†å‘˜å®¡æ ¸é€šè¿‡ 
â†’ æ•™å¸ˆç™»å½• â†’ æ¥æ”¶è¯„åˆ†ä»»åŠ¡ â†’ è¯„åˆ†ä¸»è§‚é¢˜ 
â†’ æäº¤è¯„åˆ†ç»“æœ â†’ ç³»ç»Ÿè®¡ç®—æ€»åˆ†
```

### 6. ç®¡ç†å‘˜è€ƒè¯•ç»„å·æµç¨‹ï¼ˆæ–°å¢ï¼‰

```
åˆ›å»ºè€ƒè¯•é…ç½® â†’ é€‰æ‹©è€ƒè¯•ç±»å‹ â†’ é€‰æ‹©é¢˜åº“ 
â†’ è·å–å¯é€‰é¢˜ç›®åˆ—è¡¨ â†’ é€‰æ‹©é¢˜ç›® â†’ å®æ—¶è®¡ç®—åˆ†æ•° 
â†’ éªŒè¯åˆ†å€¼ â†’ ä¿å­˜è€ƒè¯•é…ç½®
```

---

## ğŸ”’ æƒé™æ§åˆ¶

### è§’è‰²å®šä¹‰

```typescript
enum UserRole {
  ADMIN = 0,      // ç®¡ç†å‘˜
  TEACHER = 1,    // æ•™å¸ˆ
  STUDENT = 2,    // å­¦ç”Ÿ
}
```

### è®¿é—®æ§åˆ¶

æ‰€æœ‰éœ€è¦è®¤è¯çš„æ¥å£éƒ½ä½¿ç”¨ï¼š
```typescript
@ApiBearerAuth()
@UseGuards(JwtAuthGuard, RolesGuard)
@Roles(UserRole.ADMIN)  // æˆ– TEACHERã€STUDENT
```

### è¯¾ç¨‹è®¿é—®æ§åˆ¶é€»è¾‘

```typescript
// å…è´¹è¯¾ç¨‹ï¼šç›´æ¥è®¿é—®
if (course.isFree) {
  return true
}

// æ”¶è´¹è¯¾ç¨‹ï¼šæ£€æŸ¥è´­ä¹°è®°å½•
const purchase = await coursePurchaseModel.findOne({
  userId: user._id,
  courseId: course._id,
  status: 'active',
})

return !!purchase
```

---

## ğŸ“¦ éƒ¨ç½²æŒ‡å—

### 1. æ„å»ºé¡¹ç›®

```bash
pnpm run build
```

ç”Ÿæˆçš„æ–‡ä»¶åœ¨ `dist/` ç›®å½•ã€‚

### 2. ä½¿ç”¨ PM2 éƒ¨ç½²

åˆ›å»º `ecosystem.config.js`:

```javascript
module.exports = {
  apps: [{
    name: 'yuan-teaching-admin-server',
    script: 'dist/main.js',
    args: '-c config/prod.config.js',
    instances: 2,
    exec_mode: 'cluster',
    env: {
      NODE_ENV: 'production',
    },
  }],
}
```

å¯åŠ¨æœåŠ¡ï¼š

```bash
pm2 start ecosystem.config.js
pm2 save
pm2 startup
```

### 3. ä½¿ç”¨ Docker éƒ¨ç½²

åˆ›å»º `Dockerfile`:

```dockerfile
FROM node:18-alpine

WORKDIR /app

# å®‰è£… pnpm
RUN npm install -g pnpm

# å¤åˆ¶ä¾èµ–æ–‡ä»¶
COPY package.json pnpm-lock.yaml ./

# å®‰è£…ä¾èµ–
RUN pnpm install --frozen-lockfile

# å¤åˆ¶æºä»£ç 
COPY . .

# æ„å»º
RUN pnpm run build

# æš´éœ²ç«¯å£
EXPOSE 3000

# å¯åŠ¨æœåŠ¡
CMD ["node", "dist/main", "-c", "config/prod.config.js"]
```

æ„å»ºå’Œè¿è¡Œï¼š

```bash
docker build -t yuan-teaching-server .
docker run -d -p 3000:3000 \
  -e ALI_OSS_ACCESS_KEY_ID=xxx \
  -e ALI_SMS_ACCESS_KEY_ID=xxx \
  yuan-teaching-server
```

### 4. Nginx åå‘ä»£ç†

```nginx
server {
    listen 80;
    server_name api.yourdomain.com;

    location /api {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_cache_bypass $http_upgrade;
    }
}
```

> ğŸ“– **è¯¦ç»†éƒ¨ç½²æŒ‡å—**: æŸ¥çœ‹ [DEPLOYMENT.md](./DEPLOYMENT.md)

---

## ğŸ’» å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ admin/              # ç®¡ç†ç«¯æ¨¡å—
â”‚   â”œâ”€â”€ auth/          # è®¤è¯
â”‚   â”œâ”€â”€ certificate/   # è¯ä¹¦é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ certificate-management/ # è¯ä¹¦å®ä¾‹ç®¡ç† ğŸ†•
â”‚   â”œâ”€â”€ course/        # è¯¾ç¨‹ç®¡ç†
â”‚   â”œâ”€â”€ enroll/        # æŠ¥è€ƒç®¡ç†
â”‚   â”œâ”€â”€ enrollment-review/ # æŠ¥åå®¡æ ¸ç®¡ç†
â”‚   â”œâ”€â”€ exam/          # è€ƒè¯•ç®¡ç†
â”‚   â”œâ”€â”€ exam-builder/  # è€ƒè¯•ç»„å· ğŸ†•
â”‚   â”œâ”€â”€ exam-review/   # è€ƒè¯•è¯„é˜…ç®¡ç†
â”‚   â”œâ”€â”€ logistics/     # ç‰©æµç®¡ç†
â”‚   â”œâ”€â”€ order/         # è®¢å•ç®¡ç†
â”‚   â”œâ”€â”€ question-bank/ # é¢˜åº“ç®¡ç†
â”‚   â”œâ”€â”€ teacher-certification/ # æ•™å¸ˆè®¤è¯ç®¡ç†
â”‚   â”œâ”€â”€ faq/           # å¸¸è§é—®é¢˜ç®¡ç†
â”‚   â”œâ”€â”€ config/        # é…ç½®ç®¡ç†
â”‚   â””â”€â”€ user/          # ç”¨æˆ·ç®¡ç†
â”œâ”€â”€ teacher/           # æ•™å¸ˆç«¯æ¨¡å—
â”‚   â”œâ”€â”€ auth/          # è®¤è¯
â”‚   â”œâ”€â”€ certification/ # æ•™å¸ˆè®¤è¯
â”‚   â”œâ”€â”€ micro-course/  # å¾®è¯¾å ‚
â”‚   â””â”€â”€ exam-review/   # è€ƒè¯•è¯„é˜…
â”œâ”€â”€ student/           # å­¦ç”Ÿç«¯æ¨¡å—
â”‚   â”œâ”€â”€ auth/          # è®¤è¯
â”‚   â”œâ”€â”€ course/        # è¯¾ç¨‹å­¦ä¹ 
â”‚   â”œâ”€â”€ enroll/        # æŠ¥åç”³è¯·
â”‚   â”œâ”€â”€ enrollment/    # æŠ¥åä¿¡æ¯æäº¤
â”‚   â”œâ”€â”€ exam/          # åœ¨çº¿è€ƒè¯•
â”‚   â”œâ”€â”€ learning/      # å­¦ä¹ è¿›åº¦ç®¡ç†
â”‚   â”œâ”€â”€ certificate/   # è¯ä¹¦ç®¡ç†
â”‚   â”œâ”€â”€ order/         # è®¢å•ç®¡ç†
â”‚   â”œâ”€â”€ teacher/       # æ•™å¸ˆåˆ—è¡¨
â”‚   â”œâ”€â”€ faq/           # å¸¸è§é—®é¢˜
â”‚   â””â”€â”€ config/        # é…ç½®è·å–
â”œâ”€â”€ api/               # å…¬å…±APIæ¨¡å—
â”‚   â””â”€â”€ payment/       # æ”¯ä»˜å›è°ƒ
â”œâ”€â”€ modules/           # ä¸šåŠ¡æœåŠ¡æ¨¡å—
â”‚   â”œâ”€â”€ auth/          # è®¤è¯æœåŠ¡
â”‚   â”œâ”€â”€ certificate/   # è¯ä¹¦æœåŠ¡
â”‚   â”œâ”€â”€ course/        # è¯¾ç¨‹æœåŠ¡
â”‚   â”œâ”€â”€ enroll/        # æŠ¥åæœåŠ¡
â”‚   â”œâ”€â”€ exam/          # è€ƒè¯•æœåŠ¡
â”‚   â”œâ”€â”€ exam-builder/  # è€ƒè¯•ç»„å·æœåŠ¡ ğŸ†•
â”‚   â”œâ”€â”€ learning-progress/ # å­¦ä¹ è¿›åº¦æœåŠ¡
â”‚   â”œâ”€â”€ logistics/     # ç‰©æµæœåŠ¡
â”‚   â”œâ”€â”€ micro-course/  # å¾®è¯¾å ‚æœåŠ¡
â”‚   â”œâ”€â”€ module/        # æ¨¡å—æœåŠ¡
â”‚   â”œâ”€â”€ order/         # è®¢å•æœåŠ¡
â”‚   â”œâ”€â”€ payment/       # æ”¯ä»˜æœåŠ¡
â”‚   â”œâ”€â”€ question-bank/ # é¢˜åº“æœåŠ¡
â”‚   â”œâ”€â”€ review/        # è¯„å®¡æœåŠ¡
â”‚   â”œâ”€â”€ teacher-certification/ # æ•™å¸ˆè®¤è¯æœåŠ¡
â”‚   â”œâ”€â”€ sms-code/      # çŸ­ä¿¡éªŒè¯ç æœåŠ¡
â”‚   â”œâ”€â”€ faq/           # å¸¸è§é—®é¢˜æœåŠ¡
â”‚   â”œâ”€â”€ config/        # é…ç½®æœåŠ¡
â”‚   â””â”€â”€ user/          # ç”¨æˆ·æœåŠ¡
â”œâ”€â”€ libs/              # å…¬å…±åº“
â”‚   â”œâ”€â”€ ali-cloudauth/ # é˜¿é‡Œäº‘å®åè®¤è¯
â”‚   â”œâ”€â”€ ali-oss/       # é˜¿é‡Œäº‘OSS
â”‚   â”œâ”€â”€ ali-pay/       # æ”¯ä»˜å®æ”¯ä»˜
â”‚   â”œâ”€â”€ ali-sms/       # é˜¿é‡Œäº‘çŸ­ä¿¡
â”‚   â”œâ”€â”€ database/      # æ•°æ®åº“é…ç½®
â”‚   â”‚   â””â”€â”€ schemas/   # MongoDB Schemaå®šä¹‰
â”‚   â””â”€â”€ wechat-pay/    # å¾®ä¿¡æ”¯ä»˜
â”œâ”€â”€ common/            # å…¬å…±ç»„ä»¶
â”‚   â”œâ”€â”€ constants/     # å¸¸é‡
â”‚   â”œâ”€â”€ decorators/    # è£…é¥°å™¨
â”‚   â”œâ”€â”€ enums/         # æšä¸¾
â”‚   â”œâ”€â”€ exceptions/    # å¼‚å¸¸å®šä¹‰
â”‚   â”œâ”€â”€ filters/       # å¼‚å¸¸è¿‡æ»¤å™¨
â”‚   â”œâ”€â”€ interceptors/  # æ‹¦æˆªå™¨
â”‚   â”œâ”€â”€ interfaces/    # æ¥å£å®šä¹‰
â”‚   â””â”€â”€ utils/         # å·¥å…·å‡½æ•°
â””â”€â”€ config.ts          # é…ç½®åŠ è½½å™¨
```

### ä»£ç è§„èŒƒ

```bash
# ä»£ç æ£€æŸ¥
pnpm run lint

# ä»£ç æ ¼å¼åŒ–
pnpm run format

# è¿è¡Œæµ‹è¯•
pnpm run test

# æµ‹è¯•è¦†ç›–ç‡
pnpm run test:cov
```

### æ·»åŠ æ–°æ¨¡å—

```bash
# ä½¿ç”¨ NestJS CLI ç”Ÿæˆæ¨¡å—
nest generate module modules/your-module
nest generate service modules/your-module
nest generate controller admin/your-module
```

### Git æäº¤è§„èŒƒ

é¡¹ç›®å·²é…ç½® Git Hooksï¼Œæäº¤å‰ä¼šè‡ªåŠ¨æ‰§è¡Œ ESLint æ£€æŸ¥ï¼š

```bash
git add .
git commit -m "feat: æ·»åŠ æ–°åŠŸèƒ½"
# è‡ªåŠ¨è¿è¡Œ eslint --fix
```

æäº¤æ¶ˆæ¯è§„èŒƒï¼š
```bash
feat: æ–°åŠŸèƒ½
fix: ä¿®å¤bug
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼è°ƒæ•´
refactor: ä»£ç é‡æ„
test: æµ‹è¯•ç›¸å…³
chore: æ„å»º/å·¥å…·é“¾
```

---

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### 1. æ•°æ®åº“ç´¢å¼•

æ‰€æœ‰ Schema éƒ½åˆ›å»ºäº†åˆé€‚çš„ç´¢å¼•ï¼š

```typescript
// è¯¾ç¨‹ç´¢å¼•
CourseSchema.index({ projectId: 1, status: 1 })
CourseSchema.index({ status: 1, order: 1 })

// ç« èŠ‚ç´¢å¼•
LessonSchema.index({ courseId: 1, order: 1 })

// è®¢å•ç´¢å¼•
OrderSchema.index({ orderNo: 1 }, { unique: true })
OrderSchema.index({ userId: 1, status: 1 })

// è€ƒè¯•ä¼šè¯ç´¢å¼•
ExamSessionSchema.index({ userId: 1, configId: 1 })
ExamSessionSchema.index({ status: 1, createdAt: -1 })
```

### 2. æŸ¥è¯¢ä¼˜åŒ–

- ä½¿ç”¨ `.lean()` è¿”å›æ™®é€šå¯¹è±¡
- åˆç†ä½¿ç”¨ `populate()` å…³è”æŸ¥è¯¢
- åˆ†é¡µæŸ¥è¯¢é¿å…å…¨è¡¨æ‰«æ
- ä½¿ç”¨ `select()` åªæŸ¥è¯¢éœ€è¦çš„å­—æ®µ

### 3. ç¼“å­˜ç­–ç•¥

å¯ä»¥é›†æˆ Redis è¿›è¡Œï¼š
- Token ç¼“å­˜
- éªŒè¯ç ç¼“å­˜
- çƒ­ç‚¹æ•°æ®ç¼“å­˜
- é¢˜åº“ç¼“å­˜

---

## ğŸ› å¸¸è§é—®é¢˜

### Q: å¯åŠ¨æ—¶æç¤ºç«¯å£è¢«å ç”¨ï¼Ÿ

```bash
# æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
lsof -ti:3000

# ç»“æŸè¿›ç¨‹
lsof -ti:3000 | xargs kill -9
```

### Q: MongoDB è¿æ¥å¤±è´¥ï¼Ÿ

æ£€æŸ¥ï¼š
1. MongoDB æœåŠ¡æ˜¯å¦å¯åŠ¨
2. é…ç½®æ–‡ä»¶ä¸­çš„è¿æ¥åœ°å€æ˜¯å¦æ­£ç¡®
3. æ•°æ®åº“è®¿é—®æƒé™

### Q: ç¬¬ä¸‰æ–¹æœåŠ¡é…ç½®ä¸ºç©ºå¯¼è‡´å¯åŠ¨å¤±è´¥ï¼Ÿ

æœåŠ¡å·²ä¼˜åŒ–ï¼Œé…ç½®ä¸ºç©ºæ—¶ä¼šæ˜¾ç¤ºè­¦å‘Šä½†ä¸å½±å“å¯åŠ¨ï¼š
```
âš ï¸  é˜¿é‡Œäº‘ OSS é…ç½®ä¸å®Œæ•´ï¼Œæ–‡ä»¶ä¸Šä¼ åŠŸèƒ½å°†æ— æ³•ä½¿ç”¨
âš ï¸  é˜¿é‡Œäº‘çŸ­ä¿¡é…ç½®ä¸å®Œæ•´ï¼ŒçŸ­ä¿¡åŠŸèƒ½å°†æ— æ³•ä½¿ç”¨
```

### Q: å¦‚ä½•åˆå§‹åŒ–ç®¡ç†å‘˜è´¦å·ï¼Ÿ

ä½¿ç”¨ API åˆ›å»ºï¼š
```bash
POST /api/admin/users/admins
{
  "phone": "13800138000",
  "password": "admin123456",
  "name": "ç³»ç»Ÿç®¡ç†å‘˜"
}
```

### Q: æ”¶è´¹è¯¾ç¨‹å­¦ç”Ÿæ— æ³•è®¿é—®ç« èŠ‚å†…å®¹ï¼Ÿ

è¿™æ˜¯æ­£å¸¸çš„æƒé™æ§åˆ¶ï¼Œå­¦ç”Ÿéœ€è¦ï¼š
1. è´­ä¹°è¯¾ç¨‹
2. æ”¯ä»˜æˆåŠŸåè‡ªåŠ¨å¼€é€šè®¿é—®æƒé™
3. ç„¶åæ‰èƒ½æŸ¥çœ‹ç« èŠ‚çš„è§†é¢‘/PDFå†…å®¹

### Q: å¦‚ä½•ä½¿ç”¨è€ƒè¯•ç»„å·åŠŸèƒ½ï¼Ÿ

1. è·å–é¢˜åº“é¢˜å‹ç»Ÿè®¡
2. è·å–å¯é€‰é¢˜ç›®åˆ—è¡¨
3. é€‰æ‹©é¢˜ç›®å¹¶å®æ—¶è®¡ç®—åˆ†æ•°
4. éªŒè¯æ˜¯å¦å¯ä»¥ç»§ç»­é€‰é¢˜
5. ä¿å­˜è€ƒè¯•é…ç½®

è¯¦è§ [PRIORITY_FEATURES_IMPLEMENTATION.md](./PRIORITY_FEATURES_IMPLEMENTATION.md)

---

## ğŸ“ˆ ç›‘æ§å’Œæ—¥å¿—

### æ—¥å¿—çº§åˆ«

- `LOG` - æ­£å¸¸æ—¥å¿—
- `WARN` - è­¦å‘Šä¿¡æ¯
- `ERROR` - é”™è¯¯ä¿¡æ¯
- `FATAL` - è‡´å‘½é”™è¯¯

### æ—¥å¿—æŸ¥çœ‹

```bash
# PM2 æŸ¥çœ‹æ—¥å¿—
pm2 logs yuan-teaching-admin-server

# å®æ—¶æ—¥å¿—
pm2 logs yuan-teaching-admin-server --lines 100

# é”™è¯¯æ—¥å¿—
pm2 logs yuan-teaching-admin-server --err
```

---

## ğŸ”§ å¸¸ç”¨å‘½ä»¤

```bash
# å¼€å‘
pnpm run dev              # å¼€å‘æ¨¡å¼ï¼ˆçƒ­é‡è½½ï¼‰
pnpm run dev:local        # ä½¿ç”¨æœ¬åœ°é…ç½®
pnpm run debug            # è°ƒè¯•æ¨¡å¼

# æ„å»º
pnpm run build            # æ„å»ºç”Ÿäº§ç‰ˆæœ¬

# è¿è¡Œ
pnpm run start            # æ™®é€šå¯åŠ¨
pnpm run prod             # ç”Ÿäº§æ¨¡å¼

# ä»£ç è´¨é‡
pnpm run lint             # ä»£ç æ£€æŸ¥
pnpm run format           # ä»£ç æ ¼å¼åŒ–

# æµ‹è¯•
pnpm run test             # è¿è¡Œæµ‹è¯•
pnpm run test:watch       # ç›‘å¬æ¨¡å¼æµ‹è¯•
pnpm run test:cov         # æµ‹è¯•è¦†ç›–ç‡
```

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

### æäº¤ä»£ç å‰

1. è¿è¡Œä»£ç æ£€æŸ¥ï¼š`pnpm run lint`
2. è¿è¡Œæµ‹è¯•ï¼š`pnpm run test`
3. ç¡®ä¿æ„å»ºæˆåŠŸï¼š`pnpm run build`

### Commit è§„èŒƒ

```bash
feat: æ–°åŠŸèƒ½
fix: ä¿®å¤bug
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼è°ƒæ•´
refactor: ä»£ç é‡æ„
test: æµ‹è¯•ç›¸å…³
chore: æ„å»º/å·¥å…·é“¾
```

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

- **é¡¹ç›®åç§°**: è‚²å®‰æ•™è‚²ç®¡ç†å¹³å°åç«¯æœåŠ¡
- **ç‰ˆæœ¬**: v2.4.0
- **æ¡†æ¶**: NestJS 11.x
- **æ•°æ®åº“**: MongoDB 8.x
- **Nodeç‰ˆæœ¬**: >= 18.x
- **åŠŸèƒ½å®Œæˆåº¦**: 91%

---

## ğŸ“„ è®¸å¯è¯

UNLICENSED (ç§æœ‰é¡¹ç›®)

---

## ğŸ”„ æ›´æ–°æ—¥å¿—

### v2.4.0 (2025-12-07)

#### âœ¨ ç¬¬1æ‰¹é«˜ä¼˜å…ˆçº§åŠŸèƒ½ï¼ˆå·²å®Œæˆï¼‰

**è€ƒè¯•ç®¡ç†å’Œè¯ä¹¦ç³»ç»Ÿé‡å¤§å‡çº§ï¼**

##### 1. è€ƒè¯•ç±»å‹ç»„åˆè®¾ç½®
- âœ… æ–°å¢ `examType` å­—æ®µï¼šæ”¯æŒ3ç§è€ƒè¯•ç±»å‹
  - `multiple_choice`: åªæœ‰é€‰æ‹©é¢˜
  - `mc_report`: é€‰æ‹©é¢˜ + æŠ¥å‘Š
  - `thesis`: è®ºæ–‡
- âœ… æ–°å¢ `typeConfig` å­—æ®µï¼šè¯¦ç»†é…ç½®å„ç±»å‹å‚æ•°
- âœ… æ–°å¢å®Œæ•´çš„DTOéªŒè¯

##### 2. é¢˜ç›®é€‰æ‹©å’Œåˆ†å€¼è®¡ç®—åŠŸèƒ½
- âœ… æ–°å»º `ExamBuilderService`
  - è·å–å¯é€‰é¢˜ç›®åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰
  - è®¡ç®—å·²é€‰é¢˜ç›®æ€»åˆ†
  - éªŒè¯é¢˜ç›®é€‰æ‹©ï¼ˆæ™ºèƒ½æç¤ºï¼‰
  - æŒ‰é¢˜å‹ç»Ÿè®¡æ•°é‡
  - æ™ºèƒ½æ¨èé¢˜ç›®
- âœ… æ–°å»º `AdminExamBuilderController`ï¼ˆ5ä¸ªæ–°æ¥å£ï¼‰
- âœ… å®æ—¶éªŒè¯åˆ†å€¼ï¼Œé˜²æ­¢è¶…å‡ºç›®æ ‡åˆ†å€¼

##### 3. çº¸è´¨è¯ä¹¦æ‰«æç‰ˆä¸Šä¼ 
- âœ… æ‰©å±• `Certificate` Schema
  - `physicalCertificateScanUrl`: æ‰«æç‰ˆURL
  - `physicalCertificateScanUploadedAt`: ä¸Šä¼ æ—¶é—´
  - `physicalCertificateScanUploadedBy`: ä¸Šä¼ äºº
- âœ… æ–°å¢è¯ä¹¦å®ä¾‹ç®¡ç†æ¥å£ï¼ˆ4ä¸ªï¼‰
- âœ… å­¦ç”Ÿå¯åœ¨çº¿æŸ¥çœ‹æ‰«æç‰ˆ

#### ğŸ¯ å®æ–½æˆæœ
- æ–°å¢ **9ä¸ªAPIæ¥å£**
- æ–°å¢ **1ä¸ªService**ï¼ˆExamBuilderServiceï¼‰
- æ–°å¢ **2ä¸ªController**
- æ‰©å±• **2ä¸ªSchema**
- æ–°å¢ **4ä¸ªDTO**
- æ•´ä½“å®Œæˆåº¦ï¼š**77% â†’ 91%**

#### ğŸ“„ æ–°å¢æ–‡æ¡£
- **PRIORITY_FEATURES_IMPLEMENTATION.md** - ç¬¬1æ‰¹åŠŸèƒ½å®æ–½æŠ¥å‘Š
- **EXAM_MANAGEMENT_ANALYSIS.md** - è€ƒè¯•ç®¡ç†åŠŸèƒ½åˆ†æ

### v2.3.0 (2025-12-06)

#### âœ¨ æ•™å¸ˆç«¯å’Œå­¦ç”Ÿç«¯å¢å¼º

##### æ•™å¸ˆç«¯
- âœ… ç®€åŒ–æ•™å¸ˆæ³¨å†Œæµç¨‹
- âœ… åŠ¨æ€é…ç½®æ•™å¸ˆè®¤è¯å¿…å¡«å­—æ®µ
- âœ… æ•™å¸ˆè®¤è¯å®¡æ ¸æµç¨‹ä¼˜åŒ–
- âœ… è€ƒè¯•è‡ªåŠ¨åˆ†é…åŠŸèƒ½

##### å­¦ç”Ÿç«¯
- âœ… å­¦å‘˜æŠ¥è€ƒæµç¨‹ä¼˜åŒ–ï¼ˆæ–¹æ¡ˆAï¼‰
- âœ… æŠ¥åä¿¡æ¯è¯¦ç»†é…ç½®
- âœ… å­¦ä¹ è¿›åº¦æ§åˆ¶
- âœ… æ”¯ä»˜æœ‰æ•ˆæœŸï¼ˆ3åˆ†é’Ÿï¼‰
- âœ… è€ƒè¯•å®Œæˆæç¤º
- âœ… è¯ä¹¦æŸ¥è¯¢å¤–é“¾

#### ğŸ“„ æ–°å¢æ–‡æ¡£
- **STUDENT_ENROLLMENT_ENHANCEMENT.md** - å­¦å‘˜ç«¯ä¼˜åŒ–æ–¹æ¡ˆ
- **TEACHER_CERTIFICATION_FEATURE.md** - æ•™å¸ˆè®¤è¯åŠŸèƒ½

### v2.2.0 (2025-12-05)

#### âœ¨ æ–°åŠŸèƒ½
- âœ… é…ç½®é¡¹ç®¡ç†æ¨¡å—
- âœ… å¸¸è§é—®é¢˜æ¨¡å—
- âœ… æ•™å¸ˆåˆ—è¡¨æŸ¥è¯¢
- âœ… æ¨¡å—ç®¡ç†å‚æ•°ä¼˜åŒ–

### v2.1.0 (2025-12-04)

#### âœ¨ æ–°åŠŸèƒ½
- âœ… è¯ä¹¦å·¥æœ¬è´¹ç®¡ç†
- âœ… è¯ä¹¦ç‰©æµè¿½è¸ª
- âœ… è®¢å•é€€æ¬¾æµç¨‹
- âœ… å­¦ç”Ÿç«¯è®¢å•åˆ›å»º

### v2.0.0 (2025-12-03)

#### âœ¨ æ–°åŠŸèƒ½
- âœ… è€ƒè¯•è®¤è¯ä½“ç³»å…¨æ–°å‡çº§
- âœ… æŠ¥è€ƒæœ‰æ•ˆæœŸç®¡ç†ï¼ˆ2å¹´ï¼‰
- âœ… è€ƒè¯•æ¬¡æ•°æ§åˆ¶ï¼ˆ2æ¬¡å…è´¹ï¼‰
- âœ… è€ƒè¯•è¿›åº¦è¿½è¸ª
- âœ… è¯ä¹¦èµ„æ ¼æ£€æŸ¥
- âœ… è¯¾ç¨‹é‡æ–°è´­ä¹°

### v0.0.1 (2025-11-29)

#### âœ¨ åˆå§‹ç‰ˆæœ¬
- âœ… å®Œå–„çš„ä¸‰ç«¯æ¶æ„ï¼ˆç®¡ç†ç«¯ã€æ•™å¸ˆç«¯ã€å­¦ç”Ÿç«¯ï¼‰
- âœ… è¯¾ç¨‹æ”¶è´¹/å…è´¹åŒºåˆ†
- âœ… ç« èŠ‚è§†é¢‘/PDFå†…å®¹æ”¯æŒ
- âœ… åŸºäºè´­ä¹°çŠ¶æ€çš„è®¿é—®æƒé™æ§åˆ¶
- âœ… å®Œæ•´çš„æŠ¥è€ƒå®¡æ ¸æµç¨‹
- âœ… åœ¨çº¿è€ƒè¯•å’Œæ™ºèƒ½ç»„å·
- âœ… æ•™å¸ˆè¯„åˆ†å’Œè®ºæ–‡è¯„å®¡
- âœ… æ”¯ä»˜å®å’Œå¾®ä¿¡æ”¯ä»˜é›†æˆ
- âœ… è¯ä¹¦ç”Ÿæˆå’Œç‰©æµè¿½è¸ª

> ğŸ“– **å®Œæ•´å˜æ›´æ—¥å¿—**: æŸ¥çœ‹ [CHANGELOG.md](./CHANGELOG.md)

---

## ğŸ“š å‚è€ƒèµ„æº

- [NestJS å®˜æ–¹æ–‡æ¡£](https://docs.nestjs.com/)
- [MongoDB æ–‡æ¡£](https://docs.mongodb.com/)
- [Mongoose æ–‡æ¡£](https://mongoosejs.com/)
- [Swagger æ–‡æ¡£](https://swagger.io/docs/)
- [é˜¿é‡Œäº‘ OSS æ–‡æ¡£](https://help.aliyun.com/product/31815.html)
- [é˜¿é‡Œäº‘çŸ­ä¿¡æœåŠ¡](https://help.aliyun.com/product/44282.html)
- [æ”¯ä»˜å®å¼€æ”¾å¹³å°](https://open.alipay.com/)
- [TypeScript æ–‡æ¡£](https://www.typescriptlang.org/docs/)

---

## ğŸ‰ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºæœ¬é¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…ï¼

---

**Made with â¤ï¸ by Yuan Teaching Team**

**Â© 2025 è‚²å®‰æ•™è‚²ç®¡ç†å¹³å°. All rights reserved.**
